Какие кнопки должны быть
----
Главное меню (ReplyKeyboard)

Сегодня

Утро (если включено)

Вечер

Неделя

История

Статистика

Настройки
----
Внутри “Сегодня”

Inline-кнопки:

Заполнить утро

Заполнить вечер

Посмотреть сегодняшние ответы

Пропустить (и спросить “почему?” — опционально)
-----
“Неделя”

Задание недели

Промежуточный итог

Итог недели

Выбрать новую неделю (если хотите ручной старт)
----
“История”

За дату (выбор: сегодня/вчера/календарь кнопками)

За неделю

За месяц

Последние 10 записей

Поиск
----
“Статистика”

Стрик

График заполнений (просто числа по дням)

Частые темы благодарности

Экспорт - ?
----
“Настройки”

Напоминания: вкл/выкл, время утро/вечер

Часовой пояс

Режим: утро+вечер / только вечер

Приватность/удаление данных


1) Модели (минимум)

DailyEntry

user

date

completed_morning bool

completed_evening bool

created_at/updated_at
---
Answer

daily_entry

question_code

answer_text
---
UserSettings

timezone

morning_reminder_time

evening_reminder_time

streak_nudge_time (или использовать morning_reminder_time)
---
NudgePhrase (фразы “не дай стрику умереть”)

text

category (например streak_save, comeback, gentle)

is_active
---
StreakState (удобно хранить кэш, чтобы не пересчитывать каждый раз)

user

current_streak int

last_completed_date date

best_streak int

2) Где считать стрик

Когда пользователь “закрывает” день (например, завершил вечер) — ты обновляешь StreakState или в 00 - Важное решение (правило дня)
или если заполнено утро или вечер (мягче, меньше срывов)
Планировщик напоминаний (утром и вечером)

В Django: Celery + Celery Beat

Celery Beat запускает периодические задачи
задача проходит по пользователям и шлёт напоминания с учётом timezone



TelegramUser — кто пишет боту.

UserSettings — когда ему слать напоминания, какая неделя, включены ли уведомления.

DailyEntry — один объект = один день для пользователя (на нём строится стрик).

QuestionTemplate — список всех вопросов (утро/вечер/неделя) конфигурируемых через админку.

Answer — конкретные ответы на эти вопросы, привязаны к DailyEntry.

WeeklyTask + WeeklyCycle — “задание недели” и личная неделя пользователя с промежуточными/финальными выводами.

NudgePhrase — фразы “спаси стрик / вернись”.

StreakState — ускоренный доступ к текущему и лучшему стрику для главного экрана и напоминаний.

core/bot/handlers/
├── __init__.py
├── common.py          # start, back, today (дашборд)
├── morning.py         # утренние вопросы
├── evening.py         # вечерние вопросы
├── week.py            # неделя
├── history.py         # история
├── statistics.py      # статистика
├── settings.py        # настройки
